{% extends 'accounts/main.html' %} {% block content %}
<br />
{% load crispy_forms_tags %}
<br />
<h1>Dashboard</h1>
<br />
<style>
  .btn {
    max-width: 150px;
    justify-content: center;
  }
  #all-customers {
    max-width: 200px;
  }
  .row {
    display: flex;
    justify-content: center;
  }
  .card-body {
    display: flex;
    justify-content: center;
  }
</style>

{% include 'accounts/status.html' %}

<div class="row">
  <div class="col-md-5">
    <h5>CUSTOMERS:</h5>
    <hr />
    <div class="card card-body">
      <table class="table table-sm">
        <tr>
          <th></th>
          <th>Customer</th>
          <th>Phone</th>
        </tr>

        {% for customer in customers %}
        <tr>
          {% if forloop.revcounter <= 6 %}
          <td>
            <a class="btn btn-info" href="{% url 'customer' customer.id %}"
              >View</a
            >
          </td>
          <td>{{customer.name}}</td>
          <td>{{customer.phone}}</td>
          {% endif %}
        </tr>
        {% endfor %}
      </table>
      <a
        class="btn btn-info"
        id="all-customers"
        href="{% url 'all_customers'  %}"
        >View all Customers</a
      >
    </div>
  </div>

  <div class="col-md-7">
    <h5>LAST 10 ORDERS</h5>
    <hr />
    <div class="card card-body">
      <table class="table table-sm">
        <tr>
          <th>Customer</th>
          <th>Product</th>
          <th>Date Orderd</th>
          <th>Quantity</th>
          <th>Status</th>
          <th>Update</th>
          <th>Remove</th>
        </tr>
        {% for order in orders %}
        <tr>
          {% if forloop.revcounter <= 7 %}
          <td>{{order.customer.name}}</td>
          <td>{{order.product}}</td>
          <td>{{order.date_created}}</td>
          <td>{{order.order_quantity}}</td>
          <td>{{order.status}}</td>
          <td>
            <a
              class="btn btn-sm btn-info"
              href="{% url 'update_order' order.id %}"
              >Update</a
            >
          </td>
          <td>
            <a
              class="btn btn-sm btn-danger"
              href="{% url 'delete_order' order.id %}"
              >Delete</a
            >
          </td>
          {% endif %}
        </tr>
        {% endfor %}
      </table>
      <a class="btn btn-info" href="{% url 'all_orders' %}">View all Orders</a>
    </div>
  </div>

  <div class="col-md-5">
    <br />
    <h5>Customer Feedback</h5>
    <hr />
    <div class="card card-body">
      <table class="table table-sm">
        <tr>
          <th>Customer</th>
          <th>Feedback</th>
        </tr>

        {% for feedback in feedbacks %}
        <tr>
          {% if forloop.revcounter <= 5 %}

          <td>{{feedback}}</td>
          <td>{{feedback.feedback_info}}</td>
          {% endif %}
        </tr>
        {% endfor %}
      </table>
      <a class="btn btn-info" href="{% url 'all_feedback'  %}"
        >View all feedback</a
      >
    </div>
  </div>
  <div class="col-md-7">
    <br />
    <h5>MAPS</h5>
    <hr />
    <div class="card card-body">
      <p></p>
    </div>
  </div>

  <!--<div class="col-md-6">
    <br />
    <h5>REPORTS</h5>
    <hr />
    <div class="card card-body">
      <p>View all reports</p>
      <a class="btn btn-info" href="{% url 'reports' %}" width="12px"
        >Reports</a
      >
    </div>
  </div>-->

  {% endblock %}
</div>
